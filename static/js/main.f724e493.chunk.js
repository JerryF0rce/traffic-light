(window["webpackJsonptraffic-light"]=window["webpackJsonptraffic-light"]||[]).push([[0],{22:function(t,e,n){t.exports=n(35)},27:function(t,e,n){},28:function(t,e,n){},29:function(t,e,n){},35:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n.n(i),o=n(19),r=n.n(o),l=n(6),s=(n(27),n(9)),c=n(10),h=n(12),g=n(11),u=n(13),m=n(5),d=(n(28),function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(h.a)(this,Object(g.a)(e).call(this,t))).transformRoute=function(t){return t.split("-").map((function(t,e){return 0===e?t.slice(1):t[0].toUpperCase()+t.slice(1)})).join("")},n.setTimer=function(t,e){var i=+n.state.lastTimerID;clearTimeout(i);var a=setTimeout((function(){"/yellow-light"!==t&&sessionStorage.setItem("lastLight","".concat(n.transformRoute(t))),n.props.history.replace(t)}),e);sessionStorage.setItem("lastTimerID","".concat(a))},n.numberUntilNextLight=function(t,e){var i=n.state[t].duration/1e3,a=document.querySelector(".".concat(t)).children[0];a.textContent=i-1;var o=setInterval((function(){a.textContent=i-2,4===--i&&e.classList.add("hightlight"),0===i&&(clearInterval(o),e.classList.remove("hightlight"))}),1e3)},n.goToRandomLight=function(t){var e=["/green-light","/red-light"],i=Math.floor(2*Math.random());sessionStorage.setItem("lastLight",n.transformRoute(e[i])),n.setTimer(e[i],n.state[t].duration)},n.goToYellowLight=function(t){"/yellow-light"!==n.state.currentLightRoute&&n.setTimer("/yellow-light",n.state[t].duration)},n.goToRedLight=function(t){n.setTimer("/red-light",n.state[t].duration)},n.goToGreenLight=function(t){n.setTimer("/green-light",n.state[t].duration)},n.state={currentLightRoute:n.props.history.location.pathname,redLight:{duration:1e4,blinkingDuration:3e3},yellowLight:{duration:3e3},greenLight:{duration:15e3,blinkingDuration:3e3},lastLight:sessionStorage.getItem("lastLight")||"",lastTimerID:sessionStorage.getItem("lastTimerID")||""},n}return Object(u.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){console.log("componentDidMount");var t=this.transformRoute(this.state.currentLightRoute),e=document.querySelector(".".concat(t));"yellowLight"!==t&&(sessionStorage.setItem("lastLight",t),this.numberUntilNextLight(t,e)),this.goToYellowLight(t),"yellowLight"!==t||this.state.lastLight||this.goToRandomLight(t),"yellowLight"===t&&"greenLight"===this.state.lastLight&&this.goToRedLight(t),"yellowLight"===t&&"redLight"===this.state.lastLight&&this.goToGreenLight(t),e.classList.add("activeLights")}},{key:"render",value:function(){return a.a.createElement("div",{className:"trafficLight"},a.a.createElement("div",{className:"light redLight"},a.a.createElement("div",{className:"timer"})),a.a.createElement("div",{className:"light yellowLight"}),a.a.createElement("div",{className:"light greenLight"},a.a.createElement("div",{className:"timer"})))}}]),e}(i.Component)),L=(n(29),function(){return a.a.createElement("header",null,a.a.createElement("div",{className:"container"},a.a.createElement(l.b,{to:"/red-light"},"Go to: /red-light"),a.a.createElement(l.b,{to:"/yellow-light"},"Go to: /yellow-light"),a.a.createElement(l.b,{to:"/green-light"},"Go to: /green-light")))}),f=function(t){function e(){return Object(s.a)(this,e),Object(h.a)(this,Object(g.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement(m.a,{path:"/",component:L}),a.a.createElement(m.a,{path:"/red-light",component:d}),a.a.createElement(m.a,{path:"/yellow-light",component:d}),a.a.createElement(m.a,{path:"/green-light",component:d}))}}]),e}(i.Component);r.a.render(a.a.createElement(l.a,null," ",a.a.createElement(f,null)," "),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.f724e493.chunk.js.map